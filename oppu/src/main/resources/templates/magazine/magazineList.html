<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <div th:replace="/fragment/header :: head"></div>
    <style>
        .table-responsive {
            /*padding: 150px 130px 100px;*/
            padding-top: 150px;
            padding-bottom: 100px;
            margin-right: 130px;
            margin-left: 130px;
        }
        h1 {
            font-weight: bold;
            margin-bottom: 50px;
            color: #525252;
        }
        th {
            text-align: center;
            color: #4d4d4d;
        }
        th:nth-child(2) { width: 50%; }
        tr td:nth-child(2) a {
            color: #3a3a3a;
            text-decoration: none;
            cursor: pointer;
        }

        .search-bar {
            width: 400px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 15px;
        }

        @media screen and (max-width: 1210px) {
            .table-responsive {
                margin-left: 10px;
                margin-right: 10px;
            }
        }

        @media screen and (max-width: 780px) {
            th:first-child { display: none }
            th:nth-child(3) { display: none }
            th:nth-child(4) { display: none }

            td:first-child { display: none }
            td:nth-child(3) { display: none }
            td:nth-child(4) { display: none }

            th:nth-child(2) { width: 80%; }
        }
    </style>
</head>
<body>
<div th:replace="/fragment/nav :: top-nav"></div>
<div th:replace="/fragment/nav :: side-nav"></div>

<div class="table-responsive">
<h1>매거진</h1>
<!-- The form -->
    <table class="table table-hover">
        <thead class="table-light">
            <tr>
                <th>글번호</th>
                <th>제목</th>
                <th>작성자</th>
                <th>등록일</th>
                <th>조회수</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="magazine : ${paging}">
                <td th:text="${magazine.id}"></td>
                <td>
                    <a th:href="@{/magazine/getMagazine(id=${magazine.id})}" th:text="${magazine.title}"></a>
                </td>
                <td th:text="${magazine.writer}"></td>
                <td th:text="${magazine.createDate}"></td>
                <td class="px-4 py-3" th:text="${magazine.recommendNumber}"></td>
            </tr>
        </tbody>
    </table>
    <a th:href="@{/magazine/insertMagazine}" class="btn btn-light">글쓰기</a>
    <form class="search-bar" action="" method="GET">
        <div class="input-group mt-1">
            <select class="form-select">
                <option name="title" value="title">제목</option>
                <option name="writer" value="writer">작성자</option>
            </select>
            <input name="query" type="text" class="form-control" placeholder="검색어 입력">
            <button class="btn btn-primary" type="submit">검색</button>
        </div>
    </form>
    <!--페이징-->
    <nav>
        <ul th:if="${!paging.isEmpty()}" class="pagination justify-content-center">
            <li class="page-item" th:unless="${paging.number == 0}">
                <a class="page-link" th:href="@{|?page=${(paging.number)-1}|}">이전</a>
            </li>
            <li class="page-item" th:each="page : ${#numbers.sequence(0, (paging.totalPages)-1)}"
                th:if="${page >= (paging.number)-2 and page <= (paging.number)+2}">
                <a class="page-link" th:text="${page}" th:href="@{|?page=${page}|}">1</a>
            </li>
            <li class="page-item" th:unless="${paging.number == (paging.totalPages)-1}">
                <a class="page-link" th:href="@{|?page=${(paging.number)+1}|}">다음</a>
            </li>
        </ul>
    </nav>

</div>

<div th:replace="/fragment/footer :: footer"></div>
</body>
</html>


<!--페이징 및 검색기능 수정중-->
<!--<p>/ 현재 <span th:text="${reviewList.totalElements}" style="font-weight: bold">10</span>명의 회원정보가-->
<!--    등록되었습니다.</p>-->

<!--<form class="d-flex" th:action="@{/mypetboard/review/reviewList}" method="GET">-->
<!--    <input type="hidden" name="page" value="0">-->
<!--    <input type="hidden" name="size" value="3">-->

<!--    <select th:type="text" name="scategory" th:value="${scategory}" th:width="20">-->
<!--        <option value="#" selected disabled hidden>==검색 키워드 선택==</option>-->
<!--        <option value="title">제목</option>-->
<!--        <option value="content">내용</option>-->
<!--        <option value="writer">작성자</option>-->
<!--    </select>-->
<!--    <input class="input-group-text" id="keyword" size="30" type="text" name="keyword"-->
<!--           th:value="${keyword}" placeholder="검색어를 입력해주세요" aria-label="검색어를 입력해주세요">-->
<!--    <button class="btn btn-outline-success" type="submit" id="s_button">Search</button>-->
<!--</form>-->

<!--&lt;!&ndash;                    HTML 페이지 처리 Body&ndash;&gt;-->
<!--<p th:align="center">-->
<!--    총 글 갯수 : <span style="color: red; font-weight: bold"-->
<!--                   th:text="${reviewList.totalElements}">4</span><br>-->
<!--    현재 페이지 : <span style="color: green; font-weight: bold"-->
<!--                   th:text="${reviewList.pageable.pageNumber+1}">1</span><br>-->
<!--    마지막 페이지 : <span style="color: blue; font-weight: bold"-->
<!--                    th:text="${reviewList.totalPages}">5</span>-->
<!--</p>-->

<!--<ul th:align="center">-->
<!--    <li>&lt;!&ndash;if문에서 맨 첫 페이지 이면 Previous 가 비 활성화 되는 문구&ndash;&gt;-->
<!--        <th:block th:if="${reviewList.pageable.pageNumber+1 == 1 }">-->
<!--                                <span style="visibility:hidden"-->
<!--                                      th:text="${reviewList.pageable.pageNumber+0}">이전page</span>-->
<!--        </th:block>-->
<!--        <th:block th:unless="${reviewList.pageable.pageNumber+1 == 1 }">-->
<!--            <a href="#"-->
<!--               th:href="@{/mypetboard/review/reviewList(page=${reviewList.pageable.pageNumber-1}, size=5)}"-->
<!--               th:text="${reviewList.pageable.pageNumber+0}">이전page</a>-->
<!--        </th:block>-->
<!--    </li>-->
<!--    <li th:text="${reviewList.pageable.pageNumber+1}">현재page</li>-->
<!--    <li>-->
<!--        <th:block th:if="${reviewList.totalPages == reviewList.number+1 }">-->
<!--                                <span style="visibility:hidden"-->
<!--                                      th:text="${reviewList.pageable.pageNumber+2}">다음page</span>-->
<!--        </th:block>-->
<!--        <th:block th:unless="${reviewList.totalPages == reviewList.number+1 }">-->
<!--            <a href="#"-->
<!--               th:href="@{/mypetboard/review/reviewList(page=${reviewList.number+1}, size=5)}"-->
<!--               th:text="${reviewList.pageable.pageNumber+2}">다음page</a>-->
<!--        </th:block>-->
<!--    </li>-->
<!--</ul>-->